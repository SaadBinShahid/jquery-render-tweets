/*!
 * A jQuery plugin that renders tweets in Twitter API JSON format to HTML.
 * Author: Neil Goodman (http://neilgoodman.net)
 * v0.1.0
 * Licensed under the MIT license
 */
!function(a){"use strict";function b(b,e){this.element=b,this.$element=a(b),this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="renderTweets",d={template:function(b){var d="<ul>";if(b.tweets.length)for(var e=0;e<b.tweets.length;e++)d+="<li>"+a.fn[c].parseTweet(tweet.text)+"</li>";else d+="<li>Loading...</li>";return d+="</ul>"},tweets:null,url:null};b.prototype={init:function(){this.render(),this.refresh()},render:function(){var b=this.settings.tweets||[],c={tweets:b},d=a(a.parseHTML(this.settings.template(c)));this.$element.trigger("render",d),this.$element.empty().append(this.renderTemplate()),this.$element.trigger("renderCompleted",d)},refresh:function(){if(this.settings.url){var b,c=this,d=function(a){c.$element.trigger("requestCompleted",a),c.settings.tweets=a,c.render()};"string"==typeof this.settings.url?b=a.get(this.settings.url,d,"json"):"function"==typeof this.settings.url&&(b=this.settings.url(d)),this.$element.trigger("request",b)}},remove:function(){this.$element.empty().removeData("plugin_"+c)}},a.fn[c]=function(){return this.each(function(){var d=a.data(this,"plugin_"+c),e="string"==typeof f?f:"",f="string"==typeof f?{}:f;d||(d=a.data(this,"plugin_"+c,new b(this,f))),e&&d[e].apply(d,Array.prototype.slice(arguments,1))})},a.fn[c].parseTweets=function(a){var b=/@([^" ]+)/gi,c=/((http|https):\/\/[^" ]+)/gi,d=/#([^" ]+)/gi;return a=a.replace(c,'<a target="_blank" href="$1">$&</a>'),a=a.replace(d,'<a target="_blank" href="//twitter.com/search?q=%23$1&amp;src=hash">$&</a>'),a=a.replace(b,'<a target="_blank" href="//twitter.com/$1">$&</a>')}}(jQuery);
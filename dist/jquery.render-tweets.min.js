/*!
 * A jQuery plugin that renders tweets in Twitter API JSON format to HTML.
 * Author: Neil Goodman (http://neilgoodman.net)
 * v0.1.0
 * Licensed under the MIT license
 */
+function(a){"use strict";function b(b,e){this.element=b,this.$element=a(b),this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="renderTweets",d={template:function(b){var d="<ul>";if(b.tweets.length)for(var e=0;e<b.tweets.length;e++)d+="<li>"+a[c].parseTweet(b.tweets[e].text)+"</li>";else d+="<li>Loading...</li>";return d+="</ul>"},tweets:null,url:null};b.prototype={init:function(){this.render(),this.refresh()},render:function(){var b=this.settings.tweets||[],c={tweets:b},d=a(a.parseHTML(this.settings.template(c)));this.$element.trigger("render",d),this.$element.empty().append(d),this.$element.trigger("renderCompleted",d)},refresh:function(){if(this.settings.url){var b,c=this,d=function(a){c.$element.trigger("requestCompleted",a),c.settings.tweets=a,c.render()};"string"==typeof this.settings.url?b=a.get(this.settings.url,d,"json"):"function"==typeof this.settings.url&&(b=this.settings.url(d)),this.$element.trigger("request",b)}},remove:function(){this.$element.empty().removeData("plugin_"+c)}},a.fn[c]=function(d){return this.each(function(){var e=a.data(this,"plugin_"+c);e||"string"==typeof d||(e=a.data(this,"plugin_"+c,new b(this,d))),e&&"string"==typeof d&&e[d].apply(e,Array.prototype.slice(arguments,1))})},a[c]={parseTweet:function(a){if(!a)return"";var b=/@([A-Za-z0-9_]{1,15})(?![.\w]+)/gi,c=/((http|https):\/\/[\w.\/]+)/gi,d=/#{1}([\w\d]{1,140})/gi;return a=a.replace(c,'<a href="$1">$&</a>'),a=a.replace(d,'<a href="//twitter.com/search?q=%23$1&amp;src=hash">$&</a>'),a=a.replace(b,'<a href="//twitter.com/$1">$&</a>')}}}(jQuery);